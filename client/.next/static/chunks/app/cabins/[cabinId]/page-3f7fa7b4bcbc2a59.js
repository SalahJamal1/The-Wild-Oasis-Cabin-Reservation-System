(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{4752:(e,t,a)=>{Promise.resolve().then(a.bind(a,9598)),Promise.resolve().then(a.bind(a,5003)),Promise.resolve().then(a.t.bind(a,8173,23)),Promise.resolve().then(a.t.bind(a,7970,23)),Promise.resolve().then(a.bind(a,960))},1849:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(5155),r=a(8173),n=a.n(r);let l=function(){return(0,s.jsx)("div",{className:"bg-primary-700 flex items-center justify-center h-full",children:(0,s.jsxs)("p",{className:"text-xl",children:["Please",(0,s.jsx)(n(),{href:"/login",className:"text-accent-500 mx-2",children:"login"}),"to reserve this cabin right now"]})})}},9598:(e,t,a)=>{"use strict";a.d(t,{default:()=>f});var s=a(5155),r=a(9463);a(9303);var n=a(2741),l=a(8056);let i=function(e){let t,a,{cabin:i}=e,{selected:c,setSelected:o,reset:u}=(0,l.m)();if(c){let{from:e,to:s}=c;a=(0,n.X)(e,s),t=i.regularPrice*a}return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(r.hv,{className:"place-self-center mb-6 py-2",mode:"range",selected:c,onSelect:o,min:1,max:10,captionLayout:"dropdown",disabled:{before:new Date}}),(0,s.jsxs)("div",{className:"bg-accent-500  py-2 px-8 flex items-center justify-between text-primary-800",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("p",{className:"text-base flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-3xl font-light",children:["$",i.regularPrice]}),"/ night"]}),(0,s.jsxs)("p",{className:"text-base flex items-center gap-4 bg-accent-600 py-1 px-2",children:["x",(0,s.jsx)("span",{className:"text-3xl font-light",children:a||0})]}),(0,s.jsxs)("p",{className:"text-base flex items-center gap-4 uppercase",children:["Total",(0,s.jsxs)("span",{className:"text-3xl font-light",children:["$",t||0]})]})]}),(0,s.jsx)("button",{onClick:u,className:"border border-primary-800 px-4 py-1",children:"Clear"})]})]})};var c=a(1849),o=a(2115),u=a(1059),d=a(6046);let m=function(e){let{cabin:t}=e,{user:a,selected:r,reset:n}=(0,l.m)(),[i,c]=(0,o.useState)(""),[m,x]=(0,o.useState)(""),f=(0,d.useRouter)();async function p(e){if(e.preventDefault(),!r.from||!r.to||!m)return;let s={startDate:r.from,endDate:r.to,hasBreakfast:!0,observations:i,isPaid:!0,numGuests:m,cabin:{id:t.id},user:{id:a.id}};await (0,u.sH)(s),f.push("/account/reservations"),n()}return(0,s.jsxs)("div",{className:"bg-primary-900",children:[(0,s.jsxs)("h2",{className:"block text-xl tracking-wider mb-2 text-primary-200 bg-primary-800 px-16 py-2",children:["Logged in as ","".concat(a.firstName," ").concat(a.lastName)]}),(0,s.jsxs)("form",{className:"px-16 py-8",method:"POST",onSubmit:p,children:[(0,s.jsx)("label",{className:"block text-primary-200 capitalize mb-2",children:"How many guests?"}),(0,s.jsxs)("select",{className:"block w-full px-2 py-4 rounded-md mb-6 bg-primary-800",value:m,onChange:e=>x(e.target.value),children:[(0,s.jsx)("option",{children:"Select number of guests..."}),Array.from({length:t.maxCapacity},(e,t)=>(0,s.jsx)("option",{value:t+1,children:"".concat(t+1," ").concat(t+1>1?"guests":"guest")},t))]}),(0,s.jsx)("label",{className:"block text-primary-200 capitalize mb-2",children:"Anything we should know about your stay?"}),(0,s.jsx)("input",{placeholder:" Any pets, allergies, special requirements, etc.?",className:" block w-full px-2 py-6 rounded-md mb-6 bg-primary-800",value:i,onChange:e=>c(e.target.value)}),(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsx)("button",{className:"bg-accent-500 text-primary-800 font-semibold text-xl px-8 py-3",children:"Reserve now"})})]})]})};var x=a(5186);let f=function(e){let{cabin:t}=e,{user:a,loading:r}=(0,l.m)();return(0,s.jsxs)("div",{className:"grid grid-cols-2 border border-primary-800 h-[398px]",children:[(0,s.jsx)(i,{cabin:t}),(0,s.jsx)(s.Fragment,{children:r?(0,s.jsx)(x.A,{}):a.firstName?(0,s.jsx)(m,{cabin:t}):(0,s.jsx)(c.A,{})})]})}},8056:(e,t,a)=>{"use strict";a.d(t,{default:()=>c,m:()=>o});var s=a(5155),r=a(2115),n=a(1059);let l={from:null,to:null},i=(0,r.createContext)(),c=function(e){let{children:t}=e,[a,c]=(0,r.useState)(l),[o,u]=(0,r.useState)({}),[d,m]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!0);async function p(){f(!0);try{await (0,n.fQ)(),u({}),m(!1)}catch(e){console.log(e)}finally{f(!1)}}return(0,r.useEffect)(function(){(async function(){f(!0);try{let e=await (0,n.wz)();u(e)}catch(e){console.log(e),f(!1)}finally{f(!1)}})()},[]),(0,s.jsx)(i.Provider,{value:{selected:a,setSelected:c,reset:()=>c(null),user:o,Setuser:u,handelLogout:p,SetAuth:m,loading:x,Setloading:f},children:t})},o=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("the context used outside");return e}},5186:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155);let r=function(){return(0,s.jsx)("div",{className:"flex  justify-center w-full h-full absolute -translate-x-[50%] left-[50%] top-[30%]",children:(0,s.jsx)("div",{className:"loader"})})}},5003:(e,t,a)=>{"use strict";a.d(t,{TextEditor:()=>n});var s=a(5155),r=a(2115);function n(e){let{children:t}=e,[a,n]=(0,r.useState)(!1),l=a?t:t.split(" ").slice(0,45).join(" ")+"...";return(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("p",{className:"text-base text-primary-300",children:l}),(0,s.jsx)("span",{className:"ml-2 cursor-pointer border-b-2 border-primary-700 text-primary-700",onClick:()=>n(e=>!e),children:a?"Show less":"Show more"})]})}},1059:(e,t,a)=>{"use strict";a.d(t,{Dk:()=>n,Mr:()=>u,VA:()=>d,az:()=>l,fQ:()=>i,sH:()=>o,wz:()=>c});let{default:s}=a(9542),r=s.create({baseURL:"http://127.0.0.1:8080/api/v1/",withCredentials:!0});async function n(e){await r.post("/auth/signup",e)}async function l(e){return(await r.post("/auth/login",e)).data}async function i(){await r.get("/auth/logout")}async function c(){return(await r.get("/auth/current")).data}async function o(e){console.log(await r.post("bookings",e))}async function u(){return(await r.get("/bookings/bookingindery")).data}async function d(e){await r.delete("/bookings/".concat(e))}},2741:(e,t,a)=>{"use strict";function s(e,t){let a=new Date(e).getDate();return Math.abs(new Date(t).getDate()-a)}function r(e){return Intl.DateTimeFormat("en-us",{month:"long",day:"numeric",year:"numeric"}).format(new Date(e))}a.d(t,{H:()=>r,X:()=>s})},960:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s={src:"/_next/static/media/logo.b502d2fa.png",height:163,width:163,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAeFBMVEVMaXE7PDpNQTTuyX9ORjv02ItNSkKSckUrPD1lSzbwx3atgETquGMqOTseNDqNXzjGfjjes2HfvXxBSUb204XErYalgUf32prxw2vZs4LapVjs0JxRUkZoUTheSzkoMzmZXCzTnV6cYS3/5ovHoGd6TSn/78bYnUp9jgZfAAAAHHRSTlMA/PwtsPMu+O7vtP78ri70sC/56/7+/v73L63sXgu8RQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEdJREFUeJwFwQUCgCAABLADpCTsJmz//0M3gJWzLRnQ8Kuf3m1BfbT3wO2Kaj8fOn4SOqYUctQoCDWGZAfRBSmD8oAolHIeP58qBBdphB2BAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}},e=>{var t=t=>e(e.s=t);e.O(0,[638,173,542,970,814,441,517,358],()=>t(4752)),_N_E=e.O()}]);